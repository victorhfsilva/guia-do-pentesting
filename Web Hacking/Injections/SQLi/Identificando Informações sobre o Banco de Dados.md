## Identificação de Informações sobre o Banco de Dados em SQL Injection (SQLi)

Ao explorar uma vulnerabilidade de SQL Injection, um dos primeiros passos críticos para um invasor é identificar informações detalhadas sobre o banco de dados subjacente. Isso inclui determinar o tipo de banco de dados, a versão em uso, as tabelas disponíveis, e as colunas dentro dessas tabelas. 

### 1. Identificar o Banco de Dados

Diferentes bancos de dados possuem métodos específicos para a realização de determinadas operações. Identificar o tipo de banco de dados pode ajudar o invasor a ajustar as suas consultas SQL injetadas de maneira mais eficaz. Algumas técnicas incluem a tentativa de usar comandos específicos de um banco de dados e observar a resposta.

Consulte o [Cheatsheet](/Injections/SQLi/SQLi%20Cheatsheet.md) para mais detalhes sobre métodos específicos de diferentes bancos de dados.

### 2. Identificar a Versão do Banco de Dados

Conhecer a versão exata do banco de dados pode ajudar o invasor a explorar vulnerabilidades específicas dessa versão. A seguir, são apresentadas as consultas SQL para determinar a versão do banco de dados, dependendo do tipo de banco.

**Consultas para Identificar a Versão:**

- **Microsoft SQL Server e MySQL:**
   ```sql
   SELECT @@version
   ```
- **Oracle:**
   ```sql
   SELECT * FROM v$version
   ```
- **PostgreSQL:**
   ```sql
   SELECT version()
   ```

Essas consultas retornarão informações detalhadas sobre a versão do banco de dados em uso, que podem incluir o número da versão, a data de lançamento, e outras informações relevantes.

### 3. Identificar Tabelas no Banco de Dados

Uma vez identificado o tipo e a versão do banco de dados, o próximo passo é descobrir quais tabelas estão presentes. Isso pode ser feito consultando a visualização `information_schema.tables`, que é comum em muitos sistemas de gerenciamento de banco de dados.

**Consulta para Listar Tabelas:**

```sql
SELECT * FROM information_schema.tables
```

**Exemplo de Resultado:**

```
TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  TABLE_TYPE
=====================================================
MyDatabase     dbo           Products    BASE TABLE
MyDatabase     dbo           Users       BASE TABLE
MyDatabase     dbo           Feedback    BASE TABLE
```

Este resultado mostra o nome do banco de dados (`TABLE_CATALOG`), o esquema (`TABLE_SCHEMA`), o nome da tabela (`TABLE_NAME`), e o tipo de tabela (`TABLE_TYPE`).

### 4. Identificar Colunas em uma Tabela

Depois de identificar as tabelas, o invasor pode querer descobrir quais colunas existem dentro de uma tabela específica. Isso pode ser feito consultando a visualização `information_schema.columns`.

**Consulta para Listar Colunas em uma Tabela Específica:**

```sql
SELECT * FROM information_schema.columns WHERE table_name = 'Users'
```

**Exemplo de Resultado:**

```
TABLE_CATALOG  TABLE_SCHEMA  TABLE_NAME  COLUMN_NAME  DATA_TYPE
=================================================================
MyDatabase     dbo           Users       UserId       int
MyDatabase     dbo           Users       Username     varchar
MyDatabase     dbo           Users       Password     varchar
```

Este resultado mostra o catálogo (`TABLE_CATALOG`), o esquema (`TABLE_SCHEMA`), o nome da tabela (`TABLE_NAME`), o nome da coluna (`COLUMN_NAME`), e o tipo de dados da coluna (`DATA_TYPE`).
