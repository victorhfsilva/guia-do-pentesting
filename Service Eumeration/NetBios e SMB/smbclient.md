# **smbclient**

## Introdução

**smbclient** é uma ferramenta de linha de comando do Samba, usada para acessar compartilhamentos SMB/CIFS (Server Message Block/Common Internet File System). O **smbclient** permite que você se conecte a recursos compartilhados em uma rede, como pastas e impressoras, da mesma forma que o comando `net use` faz no Windows. Ele é comumente utilizado para acessar e gerenciar compartilhamentos de arquivos em sistemas Windows a partir de máquinas Linux ou Unix, ou para se conectar a servidores Samba em redes mistas.

O **SMB** é amplamente utilizado em redes Windows para compartilhamento de arquivos e recursos, e o **smbclient** permite acessar esses recursos diretamente do terminal.

## Características do smbclient

- **Acesso a Compartilhamentos SMB/CIFS**: Conecta-se a compartilhamentos de arquivos, pastas e impressoras em sistemas Windows e Samba.
- **Transferência de Arquivos**: Permite o download e upload de arquivos entre máquinas.
- **Navegação em Diretórios**: Você pode navegar pelos diretórios remotos como se estivesse no sistema local.
- **Autenticação SMB**: Oferece suporte para login com nome de usuário e senha, ou acessos anônimos a recursos.
- **Interoperabilidade entre Sistemas**: Funciona em ambientes Windows, Linux e Unix.

## Uso Básico do smbclient

O **smbclient** permite acessar e gerenciar compartilhamentos SMB em servidores Windows ou Samba a partir de sistemas Linux/Unix. A seguir estão alguns dos principais comandos e usos do **smbclient**.

### 1. Conectando-se a um Compartilhamento SMB

Para se conectar a um compartilhamento SMB, use o seguinte comando:

```bash
smbclient //servidor/compartilhamento -U usuario
```

**Exemplo:**

```bash
smbclient //192.168.1.10/Public -U admin
```

Neste exemplo, o **smbclient** está se conectando ao compartilhamento chamado `Public` no servidor `192.168.1.10`, usando o usuário `admin`. Você será solicitado a fornecer a senha do usuário.

Se o acesso ao compartilhamento for anônimo, você pode omitir o nome de usuário:

```bash
smbclient //192.168.1.10/Public
```

### Listando Arquivos em um Compartilhamento

Depois de se conectar com sucesso ao compartilhamento, você pode listar os arquivos e diretórios presentes nele utilizando o comando `ls`:

```bash
smb: \> ls
```

Isso exibirá todos os arquivos e pastas presentes no compartilhamento.

### Navegando por Diretórios

Você pode navegar pelos diretórios no compartilhamento remoto utilizando os comandos `cd` e `pwd` para mudar de diretório e ver o diretório atual, respectivamente:

```bash
smb: \> cd pasta
smb: \> pwd
```

### Download de Arquivos

Para baixar arquivos do compartilhamento remoto para sua máquina local, use o comando `get`:

```bash
smb: \> get arquivo_remoto arquivo_local
```

**Exemplo:**

```bash
smb: \> get relatórios.pdf
```

Isso baixará o arquivo `relatórios.pdf` do compartilhamento para o diretório local.

### Upload de Arquivos

Para enviar arquivos do seu sistema local para o compartilhamento SMB, use o comando `put`:

```bash
smb: \> put arquivo_local arquivo_remoto
```

**Exemplo:**

```bash
smb: \> put documentos.zip
```

Isso fará o upload do arquivo `documentos.zip` para o compartilhamento remoto.

### Criando Diretórios

Você pode criar um novo diretório no compartilhamento remoto com o comando `mkdir`:

```bash
smb: \> mkdir novo_diretorio
```

### Excluindo Arquivos ou Diretórios

Para excluir um arquivo do compartilhamento remoto, use o comando `rm`:

```bash
smb: \> rm arquivo
```

Para remover um diretório, use o comando `rmdir`:

```bash
smb: \> rmdir nome_diretorio
```

### Encerrando a Conexão

Para encerrar a sessão e sair do **smbclient**, digite `exit` ou `quit`:

```bash
smb: \> exit
```

### Listando Compartilhamentos Disponíveis em um Servidor

Para listar todos os compartilhamentos disponíveis em um servidor SMB, você pode usar o seguinte comando:

```bash
smbclient -L //servidor -U usuario
```

**Exemplo:**

```bash
smbclient -L //192.168.1.10 -U admin
```

Este comando lista todos os compartilhamentos disponíveis no servidor `192.168.1.10`, usando o usuário `admin`.

### Acessando ao compartilhamento com senha nula

Para acessar ao compartilhamento com uma senha nula basta utilizar `-N`.

**Exemplo:**

```bash
smbclient -L //192.168.1.10/PUBLIC -U admin -N
```

###  Testando Conectividade SMB com Nmap

Uma maneira útil de verificar quais portas SMB estão abertas e se um servidor está rodando SMB é usando o **Nmap**. O comando a seguir verifica as portas padrão do SMB:

```bash
nmap -p 445 --script smb-os-discovery <IP>
```