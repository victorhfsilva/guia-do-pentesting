# **dnsenum**

## Introdução

**dnsenum** é uma ferramenta de linha de comando amplamente utilizada por profissionais de segurança, pentesters e administradores de sistemas para realizar **enumeração de DNS**. Ela ajuda a coletar informações detalhadas sobre um domínio, como subdomínios, servidores de nome, registros de e-mail, servidores DNS autoritativos e muito mais. A enumeração de DNS é uma fase crítica em um teste de penetração, pois pode revelar subdomínios ou recursos que podem ser alvos de ataques.

## Instalação do **dnsenum**

### Instalação no Kali Linux

O **dnsenum** vem pré-instalado no Kali Linux. Para verificar a instalação:

```bash
dnsenum --help
```

Se não estiver instalado, você pode instalar o dnsenum com o seguinte comando:

```bash
sudo apt-get update
sudo apt-get install dnsenum
```

### Instalação em Outras Distribuições Linux

Se você estiver usando outra distribuição Linux, pode instalar o **dnsenum** clonando o repositório GitHub oficial:

```bash
git clone https://github.com/fwaeytens/dnsenum.git
cd dnsenum
sudo cpanm -v --installdeps .
```

## Uso Básico do **dnsenum**

A sintaxe básica do **dnsenum** para realizar uma enumeração de DNS é a seguinte:

```bash
dnsenum <domínio>
```

### Exemplo Básico

```bash
dnsenum example.com
```

Esse comando executa uma enumeração de DNS no domínio `example.com`, coletando informações como subdomínios, servidores de nome (NS), registros MX (Mail Exchange), e registros A (endereço IP).

#### Exemplo de Saída

```bash
dnsenum example.com
Host's addresses:
-----------------
example.com.        93.184.216.34
Name servers:
--------------
ns1.example.com
ns2.example.com
MX:
---
10 mail.example.com
```

### Consultas Detalhadas

Você pode usar a opção `-v` (verbose) para obter uma saída mais detalhada:

```bash
dnsenum -v example.com
```

Isso fornecerá informações adicionais sobre os servidores DNS, subdomínios descobertos, e verificações de registros DNS.

## Principais Funções e Opções do **dnsenum**

O **dnsenum** oferece várias opções que permitem personalizar a enumeração de DNS de acordo com suas necessidades.

### **Recursão em Subdomínios** (`-r`)

A opção `-r` habilita a busca recursiva de subdomínios. O **dnsenum** tentará realizar a enumeração nos subdomínios que ele descobre.

```bash
dnsenum -r example.com
```

Essa opção é útil para encontrar subdomínios que podem estar ocultos e que podem ser potenciais alvos de ataque.

### **Força Bruta de Subdomínios** (`-f`)

O **dnsenum** permite realizar um ataque de força bruta contra o domínio, tentando descobrir subdomínios não expostos publicamente. Para isso, ele usa um dicionário de nomes de subdomínios.

```bash
dnsenum -f example.com
```

Por padrão, o **dnsenum** vem com um arquivo de dicionário embutido, mas você também pode especificar seu próprio arquivo de dicionário com a opção `-p`:

```bash
dnsenum -f -p meu_dicionario.txt example.com
```

### **Busca de Subdomínios Usando Google** (`-s`)

O **dnsenum** pode usar o Google para tentar encontrar subdomínios associados ao domínio alvo. A opção `-s` ativa essa funcionalidade:

```bash
dnsenum -s 5 example.com
```

Neste exemplo, o número `5` especifica o número de resultados a serem exibidos na pesquisa Google.

### **Verificação de Transferência de Zona (Zone Transfer)** (`-z`)

A transferência de zona (Zone Transfer) é um método pelo qual servidores DNS compartilham informações de zona. Em alguns casos, um servidor DNS pode estar configurado de forma incorreta e permitir a transferência de zona, revelando todos os registros DNS de um domínio. A opção `-z` tenta verificar se a transferência de zona é possível:

```bash
dnsenum -z example.com
```

Se a transferência de zona estiver habilitada, isso expõe todos os subdomínios e registros DNS do domínio, tornando o servidor DNS altamente vulnerável.

### **Pesquisa de Registro Whois** (`-w`)

O **dnsenum** também pode realizar uma pesquisa Whois para o domínio, obtendo informações sobre o registro do domínio e seus detalhes administrativos:

```bash
dnsenum -w example.com
```

Isso pode fornecer informações úteis sobre o proprietário do domínio, datas de expiração e outros detalhes.

### **Especificar um Servidor DNS** (`-d`)

Se você quiser usar um servidor DNS específico para realizar a enumeração, pode especificar o servidor DNS com a opção `-d`:

```bash
dnsenum -d 8.8.8.8 example.com
```

Neste exemplo, o Google DNS (`8.8.8.8`) será usado para resolver o domínio.

### **Salvar os Resultados em um Arquivo de Saída** (`-o`)

Você pode salvar os resultados da enumeração de DNS em um arquivo de saída usando a opção `-o`:

```bash
dnsenum -o resultados.txt example.com
```

Isso cria um arquivo `resultados.txt` com todas as informações coletadas.

## Mitigação de Ataques de Enumeração DNS

Se você é um administrador de sistemas e deseja proteger seu domínio contra ataques de enumeração de DNS, aqui estão algumas recomendações:

1. **Desative a Transferência de Zona**: Configure seus servidores DNS para que a transferência de zona só seja permitida entre servidores DNS autorizados.
  
2. **Utilize Subdomínios Privados**: Evite expor subdomínios desnecessariamente e considere o uso de subdomínios privados ou registros internos que não sejam resolvíveis publicamente.

3. **Monitoramento DNS**: Monitore seu DNS para detectar tentativas de enumeração de subdomínios e atividades suspeitas.

4. **Políticas de DNSSEC**: Configure o **DNSSEC** (DNS Security Extensions) para adicionar uma camada de segurança à sua infraestrutura DNS, garantindo a integridade e autenticidade das respostas DNS.