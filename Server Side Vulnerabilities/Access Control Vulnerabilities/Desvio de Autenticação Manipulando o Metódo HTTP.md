## Desvio de Autenticação a Diretórios e Endpoints Trocando o Método HTTP

Trocar o método HTTP de uma requisição pode ser uma técnica útil para testar e explorar vulnerabilidades de controle de acesso em aplicações web.

### Introdução

Muitas aplicações web utilizam diferentes métodos HTTP (GET, POST, PUT, DELETE, etc.) para realizar operações específicas. A falta de validação adequada de métodos HTTP pode permitir que atacantes desviem os controles de acesso. Por exemplo, uma aplicação pode bloquear requisições POST a um endpoint administrativo, mas aceitar uma requisição GET com os mesmos parâmetros, permitindo assim o acesso não autorizado.

### Passos para Testar o Desvio de Autenticação Trocando o Método HTTP

#### 1. Identificar Endpoints Sensíveis

Primeiramente, identifique os endpoints sensíveis ou restritos da aplicação. Estes normalmente incluem:

- Painéis administrativos (ex.: `/admin`, `/admin-roles`)
- Páginas de configuração (ex.: `/settings`)
- Endpoints de API protegidos (ex.: `/api/user/delete`)

#### 2. Enviar uma Requisição POST com Dados

Envie uma requisição POST para um endpoint sensível com os dados apropriados. Por exemplo:

```plaintext
POST /admin-roles HTTP/2
Host: www.exemplo.com
Content-Type: application/x-www-form-urlencoded

user=wiener&action=upgrade
```

**Objetivo:** Verificar se a requisição POST é aceita ou se há alguma restrição de acesso.

#### 3. Substituir a Requisição por GET

Substitua a requisição POST por uma requisição GET com os mesmos parâmetros incluídos na URL. Por exemplo:

```plaintext
GET /admin-roles?user=wiener&action=upgrade HTTP/2
Host: www.exemplo.com
```

**Objetivo:** Verificar se a aplicação processa a requisição GET com os mesmos parâmetros e se foi possível escapar os mecanismos de autenticação.

### Análise de Resultados

- **Acesso Permitido:** Se a aplicação permite o acesso ao endpoint sensível quando o método HTTP é alterado, isso indica uma falha nos controles de acesso. A aplicação deve validar e restringir adequadamente todos os métodos HTTP.
- **Acesso Negado:** Se a aplicação nega o acesso ao endpoint quando o método HTTP é alterado, isso sugere que os controles de acesso estão corretamente implementados.
