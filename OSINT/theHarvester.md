# **theHarvester**

## Introdução

**theHarvester** é uma poderosa ferramenta de coleta de informações utilizada por profissionais de segurança, pentesters e investigadores para realizar reconhecimento (recon) de alvos. Ele permite coletar endereços de email, subdomínios, nomes de hosts, endereços IP, e muito mais a partir de várias fontes públicas na internet, como motores de busca (Google, Bing, Yahoo), redes sociais, serviços DNS e muito mais.

## Instalação

### Instalação no Kali Linux

No Kali Linux, o **theHarvester** já está incluído por padrão. Caso precise instalar ou atualizar:

```bash
sudo apt-get update
sudo apt-get install theharvester
```

### Instalação em Outros Sistemas Linux

Se você estiver usando outra distribuição, pode instalar o theHarvester clonando o repositório Git oficial:

```bash
git clone https://github.com/laramies/theHarvester.git
cd theHarvester
pip3 install -r requirements.txt
```

### Verificação da Instalação

Após a instalação, verifique se o theHarvester está funcionando corretamente:

```bash
theHarvester -h
```

Esse comando exibirá a lista de opções e parâmetros disponíveis, confirmando que a ferramenta está funcionando.

## Funcionamento Básico

A estrutura básica do comando para usar o **theHarvester** é:

```bash
theHarvester -d <domínio> -b <motor_de_busca>
```

- **-d**: Especifica o domínio alvo.
- **-b**: Especifica o motor de busca a ser usado (Bing, Yahoo, etc.).

Para adicionar API Keys edite o arquivo `/etc/theHarvester/api-keys.yaml`.

## Exemplos de Uso

### Armazenar Resultados em Arquivo

Para salvar os resultados em um arquivo de texto para análise posterior, use o parâmetro `-f`:

```bash
theHarvester -d example.com -b all -f resultados_example.txt
```

Isso criará o arquivo `resultados_example.txt` com todas as informações coletadas.

### Definindo o Número de Resultados

Você pode definir o número máximo de resultados a serem coletados com o parâmetro `-l` (limit):

```bash
theHarvester -d example.com -b all -l 500
```

Isso limita a coleta a 500 resultados.

### Realizando Busca Recursiva por Subdomínios

Para realizar uma busca recursiva em subdomínios encontrados durante a coleta:

```bash
theHarvester -d example.com -b all -f resultados_example.txt -r
```

O parâmetro `-r` ativa a busca recursiva, que pode ajudar a encontrar ainda mais subdomínios.

### Usando um Servidor DNS Específico

Se você quiser usar um servidor DNS específico durante a busca, use a opção `-vv` para definir o servidor DNS:

```bash
theHarvester -d example.com -b dnsdumpster -vv 8.8.8.8
```

Neste exemplo, estamos usando o DNS do Google (8.8.8.8) como servidor DNS.

### Filtrando Tipos Específicos de Dados

Para filtrar tipos de dados específicos, como apenas emails ou subdomínios, você pode combinar com outras ferramentas de análise de texto, ou usar a opção `grep` no Linux:

```bash
theHarvester -d example.com -b google | grep "@"
```

Isso filtrará os resultados para mostrar apenas emails.

## Melhorando a Eficiência do Reconhecimento

Aqui estão algumas dicas para melhorar a eficiência do processo de reconhecimento com o theHarvester:

- **Combine Múltiplas Ferramentas**: O theHarvester é ótimo para coleta inicial, mas pode ser complementado com ferramentas como `dnsenum`, `Amass`, e `Sublist3r` para expandir a descoberta de subdomínios e dados DNS.
- **Automatize a Coleta**: Se você realiza reconhecimento com frequência, crie scripts para automatizar o processo de coleta e salvar os resultados.
- **Atualize Regularmente**: O theHarvester está em constante atualização, por isso mantenha a ferramenta atualizada para garantir que você tenha suporte para novas APIs e fontes de informação.

## Proteção Contra Coleta de Informações

Se você é um administrador de sistemas ou segurança, aqui estão algumas dicas para proteger seu domínio contra técnicas de reconhecimento, como o theHarvester:

- **Configuração de DNS**: Certifique-se de que os registros DNS não exponham informações desnecessárias sobre sua infraestrutura.
- **Uso de TLS/SSL**: Proteja seus servidores com certificados TLS/SSL e use configurações modernas para evitar a exposição desnecessária de informações de certificados.
- **Monitoramento de Exposições**: Use serviços de monitoramento como o Shodan ou Censys para verificar se seus dispositivos estão expostos ao público sem necessidade.
