# Input e Output de Variáveis

## Introdução

O Bash é uma das linguagens de script mais usadas em sistemas Linux e Unix-like para automação de tarefas. Entender como trabalhar com input (entrada) e output (saída) de variáveis é fundamental para criar scripts eficientes e interativos.

## Input de Variáveis

### Recebendo Input do Usuário

Para solicitar uma entrada do usuário, você pode usar o comando `read`. Este comando espera que o usuário insira um valor e, em seguida, armazena esse valor em uma variável.

```bash
#!/bin/bash
echo "Digite seu nome:"
read nome
echo "Olá, $nome!"
```

Neste exemplo:
- `read nome`: Aguarda a entrada do usuário e armazena o valor na variável `nome`.
- `echo "Olá, $nome!"`: Exibe uma saudação usando o valor armazenado na variável.

### Input com Prompt

Você pode fornecer um prompt diretamente na linha de comando usando a opção `-p`.

```bash
#!/bin/bash
read -p "Digite sua idade: " idade
echo "Você tem $idade anos."
```

Aqui, o `-p "Digite sua idade: "` exibe o texto "Digite sua idade: " antes de aceitar a entrada do usuário.

### Input Secreto (Oculto)

Se você precisar que o input seja secreto (como uma senha), pode usar a opção `-s`.

```bash
#!/bin/bash
read -sp "Digite sua senha: " senha
echo
echo "Senha registrada."
```

O `-s` oculta o texto que o usuário digita.

## Output de Variáveis

### Exibindo Texto no Terminal

O comando `echo` é usado para imprimir texto e variáveis no terminal.

```bash
#!/bin/bash
nome="Carlos"
echo "Bem-vindo, $nome!"
```

### Usando Printf para Output

O `printf` oferece mais controle sobre a formatação da saída do que `echo`.

```bash
#!/bin/bash
nome="Carlos"
printf "Bem-vindo, %s!\n" "$nome"
```

Aqui, o `%s` é um marcador de posição para uma string, e `\n` adiciona uma nova linha.

## Redirecionamento de Output

### Salvando Output em um Arquivo

Você pode redirecionar a saída de um comando para um arquivo usando o operador `>`.

```bash
#!/bin/bash
echo "Este é um log" > log.txt
```

Isso cria (ou substitui) um arquivo `log.txt` com o texto "Este é um log".

### Acrescentando Output ao final de um Arquivo

Para adicionar saída a um arquivo existente sem sobrescrevê-lo, use `>>`.

```bash
#!/bin/bash
echo "Nova linha de log" >> log.txt
```

Isso adiciona "Nova linha de log" ao final de `log.txt`.

### Redirecionando Erros
Para redirecionar mensagens de erro para um arquivo, use `2>`.

```bash
#!/bin/bash
ls /diretorio_inexistente 2> erro.log
```

Isso grava a mensagem de erro gerada pela falha do comando `ls` em `erro.log`.

## Lidando com Variáveis de Ambiente

### Usando Variáveis de Ambiente

As variáveis de ambiente são globais e podem ser acessadas em qualquer lugar do script.

```bash
#!/bin/bash
echo "O usuário atual é $USER"
echo "O diretório home é $HOME"
```

### Exportando Variáveis

Você pode criar uma variável e torná-la disponível para scripts subsequentes usando `export`.

```bash
#!/bin/bash
export MEU_VAR="valor"
./outro_script.sh
```

No `outro_script.sh`, a variável `MEU_VAR` estará disponível.

## Interatividade Avançada

### Validação de Input

Você pode validar a entrada do usuário para garantir que os valores estejam no formato esperado.

```bash
#!/bin/bash
read -p "Digite um número entre 1 e 10: " numero
if [[ $numero -ge 1 && $numero -le 10 ]]; then
    echo "Número válido."
else
    echo "Número inválido."
fi
```

### Menus Interativos
Menus simples podem ser criados para que o usuário selecione opções.

```bash
#!/bin/bash
echo "Escolha uma opção:"
echo "1 - Mostrar data"
echo "2 - Mostrar usuários conectados"
read opcao

case $opcao in
    1)
        date
        ;;
    2)
        who
        ;;
    *)
        echo "Opção inválida."
        ;;
esac
```