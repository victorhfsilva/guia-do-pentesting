# Entrada/Saída (I/O) e Manipulação de Arquivos em C

## Entrada/Saída (I/O)

A linguagem C fornece funções padrão para realizar operações de entrada e saída (I/O) de dados, como a leitura de dados do teclado e a impressão de dados na tela. Essas funções estão disponíveis na biblioteca padrão `stdio.h`, que deve ser incluída em qualquer programa que utilize I/O.

### Funções de Entrada/Saída Padrão

As duas funções mais comuns de I/O em C são **`printf`** (para saída) e **`scanf`** (para entrada). Vamos explorar essas e outras funções de entrada e saída.

### Função `printf`

A função `printf` é usada para exibir informações no console.

**Sintaxe**:
```c
int printf(const char *format, ...);
```

- **format**: String de formatação que especifica como os argumentos seguintes serão exibidos. Esta string pode conter texto literal e especificadores de formato, que começam com `%`.

### Especificadores de Formato:
- `%d` – Inteiro (int)
- `%f` – Ponto flutuante (float ou double)
- `%c` – Caractere
- `%s` – String

**Exemplo**:
```c
#include <stdio.h>

int main() {
    int idade = 25;
    float altura = 1.75;

    printf("Idade: %d\n", idade);
    printf("Altura: %.2f metros\n", altura); // Limita a 2 casas decimais
    return 0;
}
```

### Função `scanf`

A função `scanf` é usada para ler dados de entrada fornecidos pelo usuário via teclado.

**Sintaxe**:
```c
int scanf(const char *format, ...);
```

- **format**: Especifica o tipo de dado esperado, usando os mesmos especificadores de formato que o `printf`.

**Exemplo**:
```c
#include <stdio.h>

int main() {
    int idade;
    float altura;

    printf("Digite sua idade: ");
    scanf("%d", &idade);  // Lê um inteiro

    printf("Digite sua altura: ");
    scanf("%f", &altura); // Lê um float

    printf("Idade: %d\n", idade);
    printf("Altura: %.2f metros\n", altura);

    return 0;
}
```

**Nota**: Ao usar `scanf`, é necessário passar o endereço da variável (usando o operador `&`), pois `scanf` modifica o valor armazenado na variável.

### Função `gets` e `fgets` (para leitura de strings)

A função **`gets`** é usada para ler uma string inteira do usuário, porém, devido a problemas de segurança (possibilidade de estouro de buffer), **não é recomendada**. O ideal é utilizar a função **`fgets`**, que permite definir o número máximo de caracteres a serem lidos.

**Exemplo com `fgets`**:
```c
#include <stdio.h>

int main() {
    char nome[50];

    printf("Digite seu nome: ");
    fgets(nome, 50, stdin);  // Lê até 49 caracteres e armazena na variável "nome"

    printf("Nome: %s", nome);
    return 0;
}
```
---

## Manipulação de Arquivos

Em C, você pode trabalhar com arquivos para leitura e escrita de dados persistentes. A biblioteca `stdio.h` também fornece funções específicas para a manipulação de arquivos, como **`fopen`**, **`fclose`**, **`fread`**, **`fwrite`**, entre outras.

###  Abertura de Arquivos com `fopen`

A função `fopen` abre um arquivo e retorna um ponteiro para o arquivo. Se o arquivo não puder ser aberto, a função retorna `NULL`.

**Sintaxe**:
```c
FILE *fopen(const char *filename, const char *mode);
```

- **filename**: O nome do arquivo a ser aberto.
- **mode**: O modo de abertura. Pode ser:
  - `"r"`: Abre para leitura (o arquivo deve existir).
  - `"w"`: Abre para escrita (cria um novo arquivo ou sobrescreve o existente).
  - `"a"`: Abre para adicionar (adiciona no final do arquivo).
  - `"r+"`: Abre para leitura e escrita.
  - `"w+"`: Abre para leitura e escrita (sobrescreve o arquivo).
  - `"a+"`: Abre para leitura e escrita (começa no final do arquivo).

**Exemplo**:
```c
#include <stdio.h>

int main() {
    FILE *arquivo = fopen("dados.txt", "w");  // Abre para escrita

    if (arquivo == NULL) {
        printf("Erro ao abrir o arquivo.\n");
        return 1;
    }

    fprintf(arquivo, "Escrevendo no arquivo.\n");  // Escreve no arquivo
    fclose(arquivo);  // Fecha o arquivo

    return 0;
}
```

### Fechando Arquivos com `fclose`

A função `fclose` fecha o arquivo aberto e garante que todos os dados sejam gravados corretamente no disco.

**Sintaxe**:
```c
int fclose(FILE *stream);
```

**Exemplo**:
```c
fclose(arquivo);  // Fecha o arquivo depois de usá-lo
```

### Lendo Dados de um Arquivo com `fread` e `fgets`

A função **`fread`** lê dados binários de um arquivo, enquanto **`fgets`** pode ser usada para ler linhas de texto de um arquivo.

#### `fread`
**Sintaxe**:
```c
size_t fread(void *ptr, size_t size, size_t nmemb, FILE *stream);
```

- **ptr**: Ponteiro para onde os dados serão armazenados.
- **size**: Tamanho de cada elemento.
- **nmemb**: Número de elementos a serem lidos.
- **stream**: Ponteiro para o arquivo.

**Exemplo**:
```c
#include <stdio.h>

int main() {
    FILE *arquivo = fopen("dados.bin", "rb");
    int buffer[10];

    if (arquivo == NULL) {
        printf("Erro ao abrir o arquivo.\n");
        return 1;
    }

    fread(buffer, sizeof(int), 10, arquivo);  // Lê 10 inteiros do arquivo
    fclose(arquivo);

    for (int i = 0; i < 10; i++) {
        printf("%d\n", buffer[i]);
    }

    return 0;
}
```

#### `fgets`
**Sintaxe**:
```c
char *fgets(char *str, int n, FILE *stream);
```

- **str**: Ponteiro para o array onde a linha será armazenada.
- **n**: Número máximo de caracteres a serem lidos.
- **stream**: Ponteiro para o arquivo.

**Exemplo**:
```c
#include <stdio.h>

int main() {
    FILE *arquivo = fopen("dados.txt", "r");
    char linha[100];

    if (arquivo == NULL) {
        printf("Erro ao abrir o arquivo.\n");
        return 1;
    }

    while (fgets(linha, 100, arquivo) != NULL) {
        printf("%s", linha);  // Imprime cada linha do arquivo
    }

    fclose(arquivo);
    return 0;
}
```

###  Escrevendo Dados em um Arquivo com `fwrite` e `fprintf`

#### `fwrite`
A função `fwrite` é usada para escrever dados binários em um arquivo.

**Sintaxe**:
```c
size_t fwrite(const void *ptr, size_t size, size_t nmemb, FILE *stream);
```

**Exemplo**:
```c
#include <stdio.h>

int main() {
    FILE *arquivo = fopen("dados.bin", "wb");
    int dados[5] = {10, 20, 30, 40, 50};

    if (arquivo == NULL) {
        printf("Erro ao abrir o arquivo.\n");
        return 1;
    }

    fwrite(dados, sizeof(int), 5, arquivo);  // Escreve 5 inteiros no arquivo
    fclose(arquivo);

    return 0;
}
```

#### `fprintf`
A função `fprintf` é similar ao `printf`, mas escreve os dados em um arquivo.

**Exemplo**:
```c
#include <stdio.h>

int main() {
    FILE *arquivo = fopen("dados.txt", "w");

    if (arquivo == NULL) {
        printf("Erro ao abrir o arquivo.\n");
        return 1;
    }

    fprintf(arquivo, "Escrevendo no arquivo de texto.\n");
    fclose(arquivo);

    return 0;
}
```
