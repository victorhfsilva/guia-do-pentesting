# Argumentos da Linha de Comando em Go

Em Go, os argumentos da linha de comando são uma forma útil de passar informações para programas. Eles podem ser acessados e manipulados usando o pacote padrão `os` e outras bibliotecas especializadas, como `flag`, que fornece uma maneira conveniente de trabalhar com opções mais complexas.

### **Acessando Argumentos Simples**

Os argumentos da linha de comando podem ser acessados diretamente usando o pacote `os`. O pacote `os.Args` contém uma fatia (`slice`) de strings que representa os argumentos passados ao programa, sendo que o primeiro elemento (`os.Args[0]`) é o nome do próprio programa.

#### Exemplo:

```go
package main

import (
    "fmt"
    "os"
)

func main() {
    // Verificando o número de argumentos
    if len(os.Args) < 2 {
        fmt.Println("Uso: go run main.go <argumentos>")
        return
    }

    // Iterando sobre os argumentos
    for i, arg := range os.Args {
        fmt.Printf("Argumento %d: %s\n", i, arg)
    }
}
```

Se rodarmos o programa com `go run main.go arg1 arg2`, a saída será:

```
Argumento 0: /path/do/programa
Argumento 1: arg1
Argumento 2: arg2
```

### **Usando a Biblioteca `flag` para Argumentos Nomeados**

Para gerenciar opções de linha de comando mais complexas (por exemplo, opções nomeadas como `--verbose` ou `-f`), o pacote `flag` é ideal. Ele permite especificar tipos de dados para os argumentos e oferece uma interface mais amigável para o usuário.

#### Exemplo com `flag`:

```go
package main

import (
    "flag"
    "fmt"
)

func main() {
    // Definindo flags
    nome := flag.String("nome", "Mundo", "Especifica o nome a ser usado na saudação")
    idade := flag.Int("idade", 0, "Especifica a idade")
    verbose := flag.Bool("verbose", false, "Exibe mais detalhes")

    // Parsing dos flags
    flag.Parse()

    // Usando os valores
    if *verbose {
        fmt.Printf("Modo detalhado ativado.\n")
    }
    fmt.Printf("Olá, %s! Você tem %d anos.\n", *nome, *idade)
}
```

Rodando o programa com `go run main.go --nome=Victor --idade=25 --verbose`, a saída será:

```
Modo detalhado ativado.
Olá, Victor! Você tem 25 anos.
```

### **Trabalhando com Argumentos Restantes**

Qualquer argumento que não seja diretamente reconhecido por `flag` pode ser acessado após o parsing com `flag.Args()`, que retorna os argumentos restantes.

#### Exemplo:

```go
package main

import (
    "flag"
    "fmt"
)

func main() {
    // Definindo flags
    nome := flag.String("nome", "Mundo", "Especifica o nome")
    flag.Parse()

    // Argumentos restantes
    outrosArgs := flag.Args()

    fmt.Printf("Olá, %s!\n", *nome)
    fmt.Printf("Argumentos adicionais: %v\n", outrosArgs)
}
```

Rodando `go run main.go --nome=Victor arg1 arg2`, a saída será:

```
Olá, Victor!
Argumentos adicionais: [arg1 arg2]
```

### **Flags de Curta Duração**

O pacote `flag` também suporta formas curtas de flags, como `-n` para `--nome`. Basta passar a flag de forma apropriada no `flag.StringVar`, por exemplo:

```go
package main

import (
    "flag"
    "fmt"
)

func main() {
    var nome string
    flag.StringVar(&nome, "n", "Mundo", "Especifica o nome")
    flag.Parse()

    fmt.Printf("Olá, %s!\n", nome)
}
```

Rodando com `go run main.go -n Victor`, teremos:

```
Olá, Victor!
```

### **Tratamento de Erros**

O pacote `flag` também oferece mecanismos para validar entradas e fornecer mensagens de erro úteis. Se o usuário passar argumentos inválidos, o programa imprimirá uma mensagem de uso padrão.

Por exemplo:

```go
package main

import (
    "flag"
    "fmt"
    "os"
)

func main() {
    nome := flag.String("nome", "Mundo", "Especifica o nome a ser usado")
    flag.Parse()

    if len(*nome) == 0 {
        fmt.Println("Erro: o nome não pode ser vazio.")
        os.Exit(1)
    }

    fmt.Printf("Olá, %s!\n", *nome)
}
```

Se o nome for omitido ou vazio, o programa retornará uma mensagem de erro apropriada.

